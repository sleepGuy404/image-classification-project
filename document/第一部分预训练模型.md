# å¯è§†åŒ–å›¾è¡¨
## ä¸€å…±æœ‰äº”å¼ å›¾è¡¨ï¼Œç»“æœä¿å­˜åœ¨resultæ–‡ä»¶å¤¹ä¸­ï¼ˆè¿è¡Œå®Œåå¾—åˆ°ï¼‰

---

**æ³¨ï¼šéœ€è¦è¿è¡Œå®Œæ‰€æœ‰ç¨‹åºåæ‰èƒ½è¿è¡Œ**

---

**ç¨‹åºè¿è¡Œæ—¶é—´è¾ƒé•¿ï¼Œå¤§æ¦‚è¦ä¸‰åˆ°å››åˆ†é’Ÿ**

* ä¸€ï¼šå±•ç¤ºç¨‹åºè¿è¡Œæ¶ˆè€—çš„æ—¶é—´  

* äºŒï¼šæ­£ç¡®åˆ†ç±»çš„å°ç‹—å›¾åƒæ‰€å ç™¾åˆ†æ¯”å¯¹æ¯”

* ä¸‰ï¼šæ­£ç¡®åˆ†ç±»çš„éå°ç‹—å›¾åƒæ‰€å ç™¾åˆ†æ¯”å¯¹æ¯”

* å››ï¼šæ­£ç¡®åˆ†ç±»çš„å°ç‹—å“ç§æ‰€å ç™¾åˆ†æ¯”å¯¹æ¯”

* äº”ï¼šæ ‡ç­¾åŒ¹é…æ•°æ‰€å ç™¾åˆ†æ¯”å¯¹æ¯”


```python
import seaborn as sns
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
 
#æ„å»ºä¸€ä¸ªå­—å…¸total_resultï¼Œå°†æ¨¡å‹åç§°ä½œä¸ºé”®ï¼Œå¾—åˆ°çš„ç›¸å…³ç»“æœä½œä¸ºå€¼
total_result = {}
# æ„å»ºä¸€ä¸ªè¿è¡Œæ—¶é—´çš„å­—å…¸ï¼Œé”®ä¸ºCNNæ¨¡å‹åç§°ï¼Œå€¼ä¸ºæ¶ˆè€—çš„æ—¶é—´
total_time = {}
for key, value in models.items():
    start = time()
    result_dic_1 = classify_images(answers_dic,key)
    adjust_results4_isadog(result_dic_1,dogfile)
    total_result[key] = calculates_results_stats(result_dic_1)
    end = time()
    total = end - start
    total_time[key] = total

#ä¸€ï¼šå±•ç¤ºç¨‹åºè¿è¡Œæ¶ˆè€—çš„æ—¶é—´
list_x = []
list_y = []
for key, value in total_time.items():
    list_x.append(key)
    list_y.append(value)
x = np.array(list_x)
y = np.array(list_y)
df = pd.DataFrame({"Runnig Time": x,"Time:(s)": y})
sns.barplot("Runnig Time","Time:(s)",palette="RdBu_r",data=df)
plt.savefig("result/running_time.png")
plt.show()

#äºŒï¼šæ­£ç¡®åˆ†ç±»çš„å°ç‹—å›¾åƒæ‰€å ç™¾åˆ†æ¯”å¯¹æ¯”
pct_correct_dogs_x_list = []
pct_correct_dogs_y_list = []
for key, value in total_result.items():
    pct_correct_dogs_x_list.append(key)
    pct_correct_dogs_y_list.append(value['pct_correct_dogs'])
pct_correct_dogs_x = np.array(pct_correct_dogs_x_list)
pct_correct_dogs_y = np.array(pct_correct_dogs_y_list)
df = pd.DataFrame({"Percentage of correctly classified dogs images":pct_correct_dogs_x,"Percentage:%":pct_correct_dogs_y})
sns.barplot("Percentage of correctly classified dogs images","Percentage:%",palette="pastel",data=df)
plt.savefig("result/pecentage_of_correctly_classfied_dogs_images.png")
plt.show()

#ä¸‰ï¼šæ­£ç¡®åˆ†ç±»çš„éå°ç‹—å›¾åƒæ‰€å ç™¾åˆ†æ¯”å¯¹æ¯”
pct_correct_not_dogs_x_list = []
pct_correct_not_dogs_y_list = []
for key, value in total_result.items():
    pct_correct_not_dogs_x_list.append(key)
    pct_correct_not_dogs_y_list.append(value['pct_correct_not_dogs'])
pct_correct_not_dogs_x = np.array(pct_correct_not_dogs_x_list)
pct_correct_not_dogs_y = np.array(pct_correct_not_dogs_y_list)
df = pd.DataFrame({"Percentage of correctly classified non-dogs images":pct_correct_not_dogs_x,"Percentage:%":pct_correct_not_dogs_y})
sns.barplot("Percentage of correctly classified non-dogs images","Percentage:%",palette="Set2",data=df)
plt.savefig("result/pecentage_of_correctly_classfied_not_dogs_images.png")
plt.show()

#å››ï¼šæ­£ç¡®åˆ†ç±»çš„å°ç‹—å“ç§æ‰€å ç™¾åˆ†æ¯”å¯¹æ¯”
pct_correct_dogs_sorted_x_list = []
pct_correct_dogs_sorted_y_list = []
for key, value in total_result.items():
    pct_correct_dogs_sorted_x_list.append(key)
    pct_correct_dogs_sorted_y_list.append(value['pct_correct_dogs_sorted'])
pct_correct_dogs_sorted_x = np.array(pct_correct_dogs_sorted_x_list)
pct_correct_dogs_sorted_y = np.array(pct_correct_dogs_sorted_y_list)
df = pd.DataFrame({'Percentage of correctly classified dogs':pct_correct_dogs_sorted_x,"Percentage:%":pct_correct_dogs_sorted_y})
sns.barplot("Percentage of correctly classified dogs","Percentage:%",palette="Set2",data=df)
plt.savefig("result/pecentage_of_correctly_classfied_dogs.png")
plt.show()

#äº”ï¼šæ ‡ç­¾åŒ¹é…æ•°æ‰€å ç™¾åˆ†æ¯”å¯¹æ¯”
pct_correct_breed_x_list = []
pct_correct_breed_y_list = []
for key, value in total_result.items():
    pct_correct_breed_x_list.append(key)
    pct_correct_breed_y_list.append(value['pct_correct_breed'])
pct_correct_breed_x = np.array(pct_correct_breed_x_list)
pct_correct_breed_y = np.array(pct_correct_breed_y_list)
df = pd.DataFrame({"Percentage of the number of tag matches":pct_correct_breed_x,"Percentage:%":pct_correct_breed_y})
sns.barplot("Percentage of the number of tag matches","Percentage:%",palette="ch:s=.25,rot=-.25",data=df)
plt.savefig("result/pecentage_of_the_number_of_tag_matches.png")
plt.show()

```

    [32m[2021-03-17 16:44:38,108] [    INFO] - Installing resnet_v2_50_imagenet module[0m


    Downloading resnet_v2_50_imagenet
    [==================================================] 100.00%
    Uncompress /home/aistudio/.paddlehub/tmp/tmpovks35_p/resnet_v2_50_imagenet
    [==================================================] 100.00%


    Downloading alexnet_imagenet
    [==================================================] 100.00%
    Uncompress /home/aistudio/.paddlehub/tmp/tmpecnzd6jn/alexnet_imagenet
    [==================================================] 100.00%


    Downloading vgg19_imagenet
    [==================================================] 100.00%
    Uncompress /home/aistudio/.paddlehub/tmp/tmpewx62vdu/vgg19_imagenet
    [==================================================] 100.00%


    Downloading googlenet_imagenet
    [==================================================] 100.00%
    Uncompress /home/aistudio/.paddlehub/tmp/tmpqgvadlw0/googlenet_imagenet
    [==================================================] 100.00%

![png](output_1_9.png)



![png](output_1_10.png)



![png](output_1_11.png)



![png](output_1_12.png)



![png](output_1_13.png)


# å›¾åƒåˆ†ç±»é¡¹ç›®

æˆ‘ä»¬æœ‰äº†å‡ åå¼ å® ç‰©çš„å›¾åƒï¼Œè¿™äº›å›¾åƒçš„ç§ç±»éƒ½åœ¨ImageNetæ•°æ®é›†ä¸­å‡ºç°è¿‡ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡CNNæ¨¡å‹æ¥å¸®æˆ‘ä»¬ç­›é€‰æ¯”è¾ƒä¸€éï¼Œé¡ºä¾¿ä¹Ÿå¯¹æ¨¡å‹çš„è¯†åˆ«ç»“æœå’Œè¯†åˆ«æ•ˆç‡è¿›è¡Œæ¯”è¾ƒã€‚

**éœ€è¦åšçš„äº‹æƒ…ï¼š**

1. åˆ©ç”¨ Python æŠ€èƒ½ä»¥åŠè°ƒç”¨PaddlePaddleçš„CNNæ¨¡å‹åˆ¤æ–­å“ªä¸ªå›¾åƒåˆ†ç±»ç®—æ³•æœ€é€‚åˆå°†å›¾åƒåˆ†ç±»ä¸ºâ€œå°ç‹—â€å’Œâ€œéå°ç‹—â€å›¾åƒã€‚
2. éœ€è¦ç¡®å®šæœ€åˆé€‚çš„åˆ†ç±»ç®—æ³•åœ¨è¯†åˆ«å°ç‹—å“ç§æ—¶çš„å‡†ç¡®ç‡ã€‚æ¯ä¸ªå›¾ç‰‡åå­—ä½¿ç”¨å½“å‰è®¤çŸ¥çš„å°ç‹—çš„å“ç§è¿›è¡Œæ ‡è®°ã€‚ç¨‹åºåªéœ€å°†ç…§ç‰‡çš„æ–‡ä»¶åï¼ˆåŒ…å«å“ç§ä¿¡æ¯ï¼‰ä¸åˆ†ç±»ç®—æ³•è¿”å›çš„å“ç§è¿›è¡Œå¯¹æ¯”ã€‚æ‰¾åˆ°ä¿¡æ¯ä¸€è‡´æˆ–è€…ä¸ä¸€è‡´çš„å°ç‹—æ˜¯å“ªäº›ã€‚
3. æœ€åï¼Œå¯¹äºè®¡ç®—ä»»åŠ¡ï¼Œé€šå¸¸éœ€è¦åœ¨å‡†ç¡®ç‡å’Œè¿è¡Œæ—¶ä¹‹é—´åšå‡ºæƒè¡¡ã€‚ç®—æ³•çš„å‡†ç¡®ç‡è¶Šé«˜ï¼Œæ›´æœ‰å¯èƒ½éœ€è¦æ›´é•¿çš„è¿è¡Œæ—¶é—´å’Œæ›´å¤šçš„è®¡ç®—èµ„æºã€‚æ‰€ä»¥éœ€è¦ç»¼åˆæ¯”è¾ƒä¸‰ç§æ¨¡å‹çš„è¿è¡Œæ—¶é—´å’Œå‡†ç¡®ç‡ã€‚
4. å¯¹äºæ¯ä¸ªå‡½æ•°ï¼Œå¯ä»¥æƒ³è±¡ä¸ºä¸€ä¸ªåŠŸèƒ½æ¨¡å—ï¼Œåœ¨è¿™ä¸ªé˜¶æ®µï¼Œå­¦ä¼šåšç³»ç»Ÿçš„æ¨¡å—ç»“æ„å›¾ï¼Œä»¥åŠæ¯ä¸ªæ¨¡å—çš„æµç¨‹å›¾

æ³¨æ„ï¼ŒæŸäº›å°ç‹—å“ç§çœ‹èµ·æ¥éå¸¸ç›¸ä¼¼ï¼Œè¿™äº›ç®—æ³•åŒºåˆ†ä¸¤ä¸ªå“ç§çš„èƒ½åŠ›åªä¸æ•°æ®é›† (ImageNet) å’Œç®—æ³•ç›¸å½“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç®—æ³•ä»è¶Šå¤šçš„ä¸¤ç§å¤–è§‚ç›¸ä¼¼çš„å°ç‹—å“ç§å›¾åƒä¸­å­¦ä¹ è§„å¾‹ï¼Œå°±è¶Šèƒ½å¤ŸåŒºåˆ†è¿™ä¸¤ä¸ªå“ç§ã€‚å¯¹äºäººç±»ä¹Ÿä¸€æ ·ï¼Œä½ çœ‹åˆ°ä¸¤ä¸ªç›¸ä¼¼å“ç§çš„å°ç‹—å›¾åƒè¶Šå¤šï¼Œå‘ç°çœŸæ­£çš„åŒºåˆ«ï¼Œå°±è¶Šèƒ½å¤ŸåŒºåˆ†è¿™ä¸¤ç§å°ç‹—ã€‚æˆ‘ä»¬å‘ç°ä»¥ä¸‹å“ç§çœ‹èµ·æ¥å¾ˆç›¸ä¼¼ï¼šå¤§ç™½ç†ŠçŠ¬å’Œç™½è­¦çŠ¬ã€å¾·ç‰§å’Œç›ä¼¦ç‰§ç¾ŠçŠ¬ã€æ¯”æ ¼çŠ¬å’Œæ­¥è¡ŒçŒçŠ¬ ç­‰ç­‰ã€‚

æœ€åæ³¨æ„ï¼Œæ ¼é›·ä¼ŠçŒçŠ¬å’Œæ¾³æ´²ç‰§ç¾ŠçŠ¬åœ¨ ImageNet ä¸­æ²¡æœ‰å›¾åƒã€‚å› æ­¤ç®—æ³•å°†å§‹ç»ˆæ— æ³•æ­£ç¡®åˆ†ç±»è¿™ä¸¤ä¸ªå“ç§ï¼Œå› ä¸ºä¹‹å‰ä»æœªè§è¿‡è¿™ä¸¤ä¸ªå“ç§ã€‚ç®—æ³•åªèƒ½åšåˆ°å°†è¿™äº›å›¾åƒåˆ†ç±»ä¸º ImageNet ä¸­å­˜åœ¨å›¾åƒçš„ç›¸ä¼¼å°ç‹—å“ç§ã€‚å› æ­¤å¦‚æœéœ€è¦è‡ªå·±æ‰¾åˆ°å›¾ç‰‡æ¥æµ‹è¯•ç®—æ³•ï¼Œéœ€è¦å°†ä»…ä½¿ç”¨ ImageNet ä¸­å­˜åœ¨çš„å°ç‹—å“ç§ã€‚

**ä¸»è¦ç›®æ ‡**

1. æ­£ç¡®æ ‡è¯†å“ªäº›å® ç‰©å›¾åƒæ˜¯å°ç‹—å›¾åƒï¼ˆå³ä½¿å“ç§åˆ†ç±»é”™è¯¯ï¼‰ï¼Œå“ªäº›å® ç‰©å›¾åƒä¸æ˜¯å°ç‹—å›¾åƒï¼ˆæ— è®ºå›¾åƒæ˜¯å¦åˆ†ç±»æ­£ç¡®ï¼‰ã€‚ 
2. é’ˆå¯¹å°ç‹—å›¾åƒæ­£ç¡®åˆ¤æ–­å°ç‹—å“ç§ã€‚
3. åˆ¤æ–­å“ªä¸ª CNN æ¨¡å‹æ¶æ„ï¼ˆResNetã€AlexNet æˆ– VGGï¼‰â€œæœ€é€‚åˆâ€å®ç°ç›®æ ‡1å’Œ2ã€‚
4. æ€è€ƒæœ€èƒ½å®ç°ç›®æ ‡ 1å’Œ2æ‰€éœ€çš„æ—¶é—´ï¼Œå¹¶åˆ¤æ–­å¯¹äºæ¯ä¸ªç®—æ³•è¿è¡Œæ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œæ˜¯å¦æœ‰æ›¿ä»£è§£å†³æ–¹æ¡ˆèƒ½å¤Ÿå®ç°æ›´å¥½çš„æ•ˆæœ

æ³¨æ„ï¼šåœ¨çº¿ç¯å¢ƒå¦‚æœæœ‰ä¸æ˜ç™½çš„åœ°æ–¹ï¼Œä½¿ç”¨https://ai.baidu.com/ai-doc/AISTUDIO/sk3e2z8sb
å®Œæˆå†…å®¹åï¼Œæ³¨æ„ä¿å­˜è‡ªå·±çš„é¡¹ç›®å†…å®¹ï¼Œç”Ÿæˆæ–°çš„ç‰ˆæœ¬ã€‚


# ä»»åŠ¡1ï¼šè®¡ç®—ä»£ç è¿è¡Œæ—¶é—´

æˆ‘ä»¬çš„ä»»åŠ¡çš„ä¸»ä½“ä»£ç æ˜¯åœ¨check_imagesæ¨¡å—é‡Œï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡æ˜¯ï¼š**æ·»åŠ è®¡ç®—ç¨‹åºè¿è¡Œæ—¶é—´çš„ç›¸åº”ä»£ç **(ä¹Ÿå°±æ˜¯æ ‡è®°ä¸ºTODO1çš„åœ°æ–¹)ã€‚ç¼–å†™å®Œæ¯•åï¼Œè¯¥ä»£ç å°†è®¡ç®—ç¨‹åºçš„æ€»è¿è¡Œæ—¶é—´ã€‚åç»­è¯¥ä»£ç å°†è¡¡é‡ä¸‰ä¸ªç®—æ³•ä¸­çš„æ¯ä¸ªç®—æ³•å¯¹ pet_images æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰å›¾åƒè¿›è¡Œåˆ†ç±»æ‰€éœ€çš„æ—¶é—´ã€‚

ç¼–å†™å®Œè¿è¡Œæ—¶é—´è®¡ç®—çš„ä»£ç åï¼Œé€šè¿‡ä½¿ç”¨sleep()å‡½æ•°æµ‹è¯•è®¡ç®—è¿è¡Œæ—¶é—´çš„ä»£ç æ˜¯å¦è¿è¡Œæ­£ç¡®ã€‚æ—¶é—´æ¨¡å—çš„æµ‹è¯•åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼šåœ¨ sleep() å‡½æ•°ä¸­è®¾ç½®ä¸åŒçš„å€¼ï¼ˆç§’ï¼‰ï¼Œæ£€æŸ¥æ—¶é•¿å’Œæ—¶é—´æ ¼å¼ã€‚


```python
# æ­¤å¤„æ˜¯ä¸»ç¨‹åºæ¨¡å—ï¼Œä»»åŠ¡ä¸€çš„å†…å®¹åœ¨æ­¤æ¨¡å—ä¸­ç¼–å†™
# å¦å¤–äº”ä¸ªä»»åŠ¡çš„å†…å®¹ï¼Œéœ€è¦åœ¨è¿™æ®µä¸»ç¨‹åºä»£ç ä¸­è°ƒç”¨ä¸åŒçš„ä»»åŠ¡å‡½æ•°å®Œæˆ
# Pythonä¸ä¼šåƒCè¯­è¨€ä¸€æ ·ï¼Œæ ‡ç¤ºå‡ºMAINç¨‹åºæ¥ä»£è¡¨ä¸»ç¨‹åºã€‚
# å¯ä»¥ç›´æ¥ç†è§£è¿™æ®µä»£ç æ˜¯æˆ‘ä»¬åˆ†ç±»é¡¹ç›®çš„ä¸»ç¨‹åº
# classify_dog_project

from time import time, sleep
from os import listdir
import seaborn

# TODO: 1. 
start = time()
# definitionï¼Œä¸»è¦æ˜¯å®šä¹‰å® ç‰©å›¾åƒæ–‡ä»¶å¤¹ï¼Œæ¨¡å‹åç§°ï¼ˆåé¢è¦æ¯”è¾ƒä¸åŒçš„æ¨¡å‹,æ‰€ä»¥æ¨¡å‹åç§°ä¼šè¢«ä¿®æ”¹ï¼‰ï¼Œå°ç‹—åç§°å®šä¹‰æ–‡ä»¶çš„åç§°
classify_dir='pet_images/'
arch='mobilenet'
dogfile='dognames.txt'

# TODO: 2. 
answers_dic = get_pet_labels()

# TODO: 3. 
result_dic = classify_images(answers_dic,arch)
    
# TODO: 4. 
adjust_results4_isadog(result_dic,dogfile)

# TODO: 5.
results_stats_dic = calculates_results_stats(result_dic)

# TODO: 6. 
print_results(result_dic,results_stats_dic,arch,True,True)
#åœ¨è¾“å‡ºç‹—ç‹—çš„å“ç§æ—¶å¯èƒ½ä¼šæœ‰é‡å¤çš„ç‹—ç‹—ç§ç±»ï¼Œä½¿ç”¨setå‡½æ•°å‰”é™¤å¤šä½™çš„ç§ç±»

# TODO: 1. è¾“å‡ºæœ€ç»ˆè¿è¡Œæ—¶é•¿æ ¼å¼ä¸º hh:mm:ss 
end = time()
total = end - start
seconds = int((total % 3600)%60)
minutes = int((total % 3600) / 60)
hours = int(total / 3600)
print(f"ç¨‹åºè¿è¡Œæ—¶é—´ï¼š{hours}:{minutes}:{seconds}")


```

    [32m[2021-03-17 16:44:03,129] [    INFO] - Installing mobilenet_v2_imagenet module[0m


    Downloading mobilenet_v2_imagenet
    [==================================================] 100.00%
    Uncompress /home/aistudio/.paddlehub/tmp/tmphofmq1mb/mobilenet_v2_imagenet
    [==================================================] 100.00%


    ä½¿ç”¨CNNæ¨¡å‹æ¶æ„ä¸­çš„mobilenet_v2_imagenetæ¶æ„ï¼Œä¼ å…¥çš„å‚æ•°æ˜¯mobilenet
    å›¾åƒæ•°é‡ï¼š40
    å°ç‹—å›¾åƒæ•°é‡ï¼š30
    éå°ç‹—å›¾åƒæ•°é‡ï¼š10
    
    ç»“æœ:
    	æ­£ç¡®çš„å°ç‹—å›¾åƒæ‰€å ç™¾åˆ†æ¯”ï¼š100.0%
    	æ­£ç¡®çš„å“ç§å›¾åƒæ‰€å ç™¾åˆ†æ¯”ï¼š80.0%
    	æ­£ç¡®çš„éå°ç‹—å›¾åƒæ‰€å ç™¾åˆ†æ¯”ï¼š90.0%
    	åŒ¹é…é¡¹æ‰€å ç™¾åˆ†æ¯”ï¼ˆåŒ…å«å°ç‹—å›¾åƒå’Œéå°ç‹—å›¾åƒï¼‰ï¼š70.0%
    
    åˆ†ç±»é”™è¯¯çš„é¡¹ï¼š
    
        å›¾ç‰‡åï¼š
    	German_Shepherd_Dog_04890.Jpg
    	Great_Pyrenees_05367.Jpg
    	Boston_Terrier_02259.Jpg
    	Gecko_80.Jpg
    	Polar_Bear_04.Jpg
    	Boston_Terrier_02285.Jpg
    	German_Shorthaired_Pointer_04986.Jpg
    	Boston_Terrier_02303.Jpg
    	Cat_07.Jpg
    	Cat_01.Jpg
    	Great_Horned_Owl_02.Jpg
    	Gecko_02.Jpg
    
        ç‹—ç‹—å“ç§ï¼š
    	 german shorthaired pointer
    	 boston terrier
    	 german shepherd dog
    	 great pyrenees
    ç¨‹åºè¿è¡Œæ—¶é—´ï¼š0:0:21



```python
#############################################################################
# æ­¤å¤„å¼€å§‹æ˜¯TODO2-TODO6çš„å‡½æ•°å®šä¹‰å’Œä»»åŠ¡éƒ¨åˆ†
```

# ä»»åŠ¡2ï¼šåˆ›å»ºå›¾åƒæ ‡ç­¾

ä»»åŠ¡2ï¼ˆTODO 2ï¼‰çš„ä¸»è¦å†…å®¹éœ€è¦ç¼–å†™æœªå®šä¹‰å‡½æ•°get_pet_labelsã€‚
åœ¨è¿™ä¸ªå‡½æ•°é‡Œå‡½æ•°ï¼Œéœ€è¦ä½¿ç”¨ pet_images æ–‡ä»¶å¤¹ä¸­çš„å® ç‰©å›¾åƒçš„æ–‡ä»¶åä¸ºå® ç‰©å›¾åƒåˆ›å»ºæ ‡ç­¾ã€‚è¿™äº›å® ç‰©å›¾åƒæ ‡ç­¾æ ‡ç¤ºå® ç‰©å›¾åƒä¸­çš„åŠ¨ç‰©å“ç§ï¼›å› æ­¤ï¼Œå®ƒä»¬ä»£è¡¨äº†å›¾åƒåˆ†ç±»â€œçœŸå®ç»“æœâ€çš„æ ‡ç­¾ã€‚

ç¼–å†™å®Œæ¯•åï¼Œå‡½æ•°å°†è¿”å›ä¸€ä¸ªå­—å…¸ï¼Œå­—å…¸é‡ŒåŒ…å«äº†pet_image æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰40ä¸ªå® ç‰©å›¾åƒçš„é”®å€¼å¯¹ï¼šé”®æ˜¯å® ç‰©å›¾åƒæ–‡ä»¶åï¼Œå€¼æ˜¯å® ç‰©å›¾åƒæ ‡ç­¾ã€‚

ç„¶åå›åˆ°è°ƒç”¨æ¨¡å—ï¼Œè°ƒç”¨get_pet_labels

**æµ‹è¯•å†…å®¹**
* æ·»åŠ ä¸€ä¸ªä¸´æ—¶è¾“å‡ºè¯­å¥ï¼Œè¾“å‡º get_pet_labels å‡½æ•°è¿”å›çš„å­—å…¸çš„å‰ 10 ä¸ªé”®å€¼å¯¹ï¼Œå¹¶è¾“å‡ºè¯¥å­—å…¸çš„é•¿åº¦ã€‚
* å­—å…¸åŒ…å« 40 ä¸ªé”®å€¼å¯¹ï¼ˆä¾‹å¦‚å­—å…¸é•¿åº¦ä¸º 40ï¼‰ã€‚
* å® ç‰©å›¾åƒæ ‡ç­¾å…¨å°å†™ï¼Œå¤šä¸ªå•è¯æ„æˆçš„å® ç‰©æ ‡ç­¾ç”¨ä¸€ä¸ªç©ºæ ¼åŒºåˆ†æ¯ä¸ªå•è¯ï¼Œå¹¶ä¸”æ­£ç¡®åœ°æ ‡è¯†äº†æ–‡ä»¶åã€‚


```python
# ä»»åŠ¡2çš„å†…å®¹ï¼šTODO 2
def get_pet_labels():
    """
    è¿™ä¸ªå‡½æ•°éœ€è¦æœ€ç»ˆè¿”å›ä¸€ä¸ªåŸºäºç‹—ç‹—å›¾åƒæ–‡ä»¶åå­—çš„å­—å…¸ã€‚
    éœ€è¦å°†å® ç‰©å›¾åƒæ–‡ä»¶åè¯»å–åå¹¶æå–å½“å‰å® ç‰©å›¾åƒç±»åˆ«æ ‡ç­¾ã€‚
    è¿™ä¸ªæ ‡ç­¾æœ€åçš„ä½œç”¨æ˜¯ç”¨äºå’Œæˆ‘ä»¬ç½‘ç»œåˆ†ç±»ç»“æœè¿›è¡Œæ¯”è¾ƒï¼Œå¹¶ç¡®å®šç½‘ç»œåˆ†ç±»çš„æ­£ç¡®ç‡ã€‚

    å‡½æ•°å‚æ•°Parameters:
    image_dir - å®Œæ•´çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œæ–‡ä»¶å¤¹å†…å­˜æ”¾çš„æ‰€æœ‰çš„å¾…CNNæ¨¡å‹è¯†åˆ«çš„ç‹—ç‹—çš„å›¾åƒã€‚
    å‡½æ•°è¿”å›å€¼Returns:
    petlabels_dic - ä¸€ä¸ªå­˜å‚¨äº†å›¾ç‰‡æ–‡ä»¶åä½œä¸ºå­—å…¸KEYï¼Œå’Œå® ç‰©å½“å‰æ–‡ä»¶åæ ‡ç­¾ä½œä¸ºValueçš„å­—å…¸ã€‚
    """
    filename_list = listdir("pet_image/")
    petlabels_dic = {}
    for filename in filename_list:
        lower_filename = filename.lower()
        word_list_filename = lower_filename.split('_')
        pet_name = ''
        for index in word_list_filename:
            if index.isalpha():
                pet_name += (index+" ")
        pet_name = pet_name.strip()
        petlabels_dic[filename] = pet_name
    return petlabels_dic


```

# ä»»åŠ¡3 ï¼šä½¿ç”¨æ¨¡å‹è¾“å‡ºçš„å†…å®¹ä¸ºå›¾åƒè¿›è¡Œåˆ†ç±»

è¿™ä¸ªä»»åŠ¡éœ€è¦å®Œæˆä¸¤éƒ¨åˆ†çš„å†…å®¹
1. åˆ›å»ºclassifierå‡½æ•°ï¼Œåœ¨è¯¥å‡½æ•°é‡Œè°ƒç”¨CNNæ¨¡å‹
2. åœ¨classify_imageså‡½æ•°é‡Œä½¿ç”¨classifierå‡½æ•°ä¸ºå® ç‰©å›¾åƒåˆ›å»ºæ ‡ç­¾ã€‚

æ­¤å¤–ï¼Œè¿˜éœ€è¦å°†åˆ†ç±»å™¨è®¡ç®—çš„æ ‡ç­¾ä¸åŸå§‹çš„å® ç‰©å›¾åƒæ ‡ç­¾è¿›è¡Œæ¯”è¾ƒï¼ˆåˆ¤æ–­å›¾åƒæ ‡è¯†ç¬¦æ˜¯å¦æ­£ç¡®ï¼‰ã€‚

æœ€åï¼Œè¿˜éœ€è¦ä½¿ç”¨ classify_images è¿”å›æ•°æ®ç»“æ„å­˜å‚¨å® ç‰©å›¾åƒæ ‡ç­¾ã€åˆ†ç±»å™¨ç”Ÿæˆçš„æ ‡ç­¾å’Œæ ‡ç­¾æ¯”è¾ƒç»“æœï¼ˆåˆ—è¡¨å­—å…¸ç»“æ„ï¼‰ã€‚
è¿™ä¸ªåˆ—è¡¨å­—å…¸ç»“æ„ï¼šé”®æ˜¯å® ç‰©å›¾åƒæ–‡ä»¶åï¼Œæ¯ä¸ªå€¼æ˜¯é’ˆå¯¹ pet_image æ–‡ä»¶å¤¹ä¸­æ‰€æœ‰ 40 å¼ å® ç‰©å›¾åƒçš„åˆ—è¡¨ã€‚è¿™ä¸ªåˆ—è¡¨å°†åŒ…å«ä»¥ä¸‹æ¡ç›®ï¼šå® ç‰©å›¾åƒæ ‡ç­¾ï¼ˆç´¢å¼• 0ï¼‰ã€åˆ†ç±»å™¨æ ‡ç­¾ï¼ˆç´¢å¼• 1ï¼‰ï¼Œä»¥åŠæ ‡ç­¾æ¯”è¾ƒç»“æœï¼ˆç´¢å¼• 2ï¼‰ã€‚

**æµ‹è¯•å†…å®¹**

* æ·»åŠ è¾“å‡ºè¯­å¥ï¼Œä½¿ç”¨ classify_images è¿”å›çš„å­—å…¸è¾“å‡ºåˆ†ç±»å™¨æ ‡ç­¾å’Œå® ç‰©æ ‡ç­¾åŒ¹é…ï¼ˆä¹Ÿå°±æ˜¯ç´¢å¼•2å¤„å€¼ä¸º1çš„æƒ…å†µï¼‰çš„æ‰€æœ‰æƒ…å½¢ã€‚
* æ­¤å¤–ï¼Œæ·»åŠ å¦ä¸€ä¸ªè¾“å‡ºè¯­å¥ï¼Œä½¿ç”¨ classify_images è¿”å›çš„å­—å…¸è¾“å‡ºåˆ†ç±»å™¨æ ‡ç­¾å’Œå® ç‰©æ ‡ç­¾ä¸åŒ¹é…ï¼ˆä¹Ÿå°±æ˜¯ç´¢å¼•2å¤„å€¼ä¸º0ï¼‰çš„æ‰€æœ‰æƒ…å½¢ã€‚

å»ºè®®éå†å­—å…¸ä¸¤æ¬¡ï¼Œç”¨ä¸¤ä¸ªä¸åŒçš„ç¾¤ç»„è¾“å‡ºåŒ¹é…å’Œä¸åŒ¹é…çš„æƒ…å½¢ï¼Œè¿™æ ·æ£€æŸ¥èµ·æ¥æ›´ç®€å•ã€‚

éœ€è¦æ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

* åˆ†ç±»å™¨å’Œå® ç‰©å›¾åƒæ ‡ç­¾åŒ¹é…çš„æƒ…å½¢çš„ç¡®åŒ¹é…
* åˆ†ç±»å™¨å’Œå® ç‰©å›¾åƒæ ‡ç­¾ä¸åŒ¹é…çš„æƒ…å½¢çš„ç¡®ä¸åŒ¹é…
* åŒ¹é…æ•°å’Œä¸åŒ¹é…æ•°åŠ èµ·æ¥ä¸º 40ï¼Œæ­£å¥½ç­‰äº pet_images æ–‡ä»¶å¤¹ä¸­çš„å›¾åƒæ€»æ•° 40ã€‚  



```python
#ä»»åŠ¡3çš„å†…å®¹ï¼šTODO 3

#ä½¿ç”¨æœ¬æ¨¡å—å®šä¹‰classifierå‡½æ•°
#è¿™ä¸ªæ¨¡å—ä¸»è¦é€šè¿‡PaddlePaddleæ¥è°ƒç”¨CNNé¢„è®­ç»ƒæ¨¡å‹ï¼Œå¹¶è¯†åˆ«å›¾åƒï¼ˆPaddlehubä¸­resnet18/alexnet/vgg19è¿™ä¸‰ä¸ªæ¨¡å‹ï¼Œéœ€è¦ä¿æŒè”ç½‘ï¼‰
#https://aistudio.baidu.com/aistudio/projectdetail/361892 è¯¥é¡¹ç›®ä¸­æœ‰æ‰€æœ‰PaddleHubæä¾›çš„é¢„è®­ç»ƒæ¨¡å‹è§£è¯´å’Œä½¿ç”¨ç¤ºä¾‹

#è¯·çœ‹å·¦è¾¹ï¼Œå® ç‰©å›¾ç‰‡æ–‡ä»¶å¤¹ä½ç½®
image_dir = "/home/aistudio/pet_image/"

#å®šä¹‰å¥½çš„æ¨¡å‹è°ƒç”¨çš„åç§°
models = {'resnet': 'resnet_v2_50_imagenet', 'alexnet': 'alexnet_imagenet', 'vgg': 'vgg19_imagenet','googlenet':'googlenet_imagenet','mobilenet':"mobilenet_v2_imagenet"}

import paddlehub as hub

def classifier(image_dir,image_path,model):
  """
    è¯¥å‡½æ•°é€šè¿‡åŠ è½½Paddlehubçš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œè°ƒç”¨æ¨¡å‹çš„classificationå‡½æ•°ï¼Œå¹¶å¾—åˆ°å›¾ç‰‡çš„åˆ†ç±»ç»“æœã€‚
    å‚æ•°: 
      image_path - éœ€è¦è¯†åˆ«çš„å›¾ç‰‡çš„å®Œæ•´è·¯å¾„
      model -ä½¿ç”¨è¿™ä¸ªå‚æ•°æŒ‡å®šé¢„è®­ç»ƒçš„æ¨¡å‹ï¼Œæ¨¡å‹å€¼ä¸ºä»¥ä¸‹ä¸‰ç§: resnet alexnet vgg (string)
    è¿”å›å€¼:
      result - è¯¥å›¾ç‰‡åˆ†ç±»ç»“æœlabel
  """
  module = hub.Module(name=models[model])
  test_img_path =image_dir+image_path
  input_dict = {"image": [test_img_path]}
  result = module.classification(data=input_dict)
  temp_dict =  result[0][0]
  temp_list = list(temp_dict.keys())
  return temp_list[0]
```


```python
#ä»»åŠ¡3çš„å†…å®¹ï¼šTODO 3

#ä½¿ç”¨æœ¬æ¨¡å—å®šä¹‰classify_imageså‡½æ•°
#answers_dicå­—å…¸é‡ŒåŒ…å«äº†pet_image æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰40ä¸ªå® ç‰©å›¾åƒçš„é”®å€¼å¯¹ï¼šé”®æ˜¯å® ç‰©å›¾åƒæ–‡ä»¶åï¼Œå€¼æ˜¯å® ç‰©å›¾åƒæ ‡ç­¾ã€‚
def classify_images(answers_dic,model):
   results_dic={}
   petlabel_dic = {}
   for key,value in answers_dic.items():
      label = classifier(image_dir,key,model).lower()
      petlabel_dic[key]=label.strip()
      # petlabel_dic - åŒ…å«äº†å® ç‰©å›¾ç‰‡labelçš„å­—å…¸ï¼Œå®ƒçš„keyæ˜¯å® ç‰©æ–‡ä»¶åï¼Œå®ƒçš„å€¼æ˜¯å® ç‰©å›¾ç‰‡labelã€‚
      if_same = 0
      found_idx = petlabel_dic[key].find(value)
      if found_idx ==0 and len(value)==len(petlabel_dic[key]):
         if_same = 1
      if ((found_idx == 0) or (petlabel_dic[key][found_idx-1]==" ")) and ((found_idx + len(value)== len(petlabel_dic[key])) or
         (petlabel_dic[key][found_idx+len(value):found_idx+len(value)+1]in (' ',','))):
         if_same = 1  
      found_idx_2 = value.find(petlabel_dic[key])
      if found_idx_2 == 0 and len(value)==len(petlabel_dic[key]):
         if_same = 1
      if ((found_idx_2 == 0) or (value[found_idx_2-1]==" ")) and ((found_idx_2 + len(petlabel_dic[key])== len(value)) or
         (value[found_idx_2+len(petlabel_dic[key]):found_idx_2+len(petlabel_dic[key])+1]in (' ',','))):
         if_same = 1  
      index_of_results_dic = []
      index_of_results_dic.append(value)
      index_of_results_dic.append(label)
      index_of_results_dic.append(if_same)
      results_dic[key] = index_of_results_dic
   return results_dic
```

# ä»»åŠ¡4ï¼šé€šè¿‡æ ‡ç­¾è¯†åˆ«ä¸ºå°ç‹—æˆ–è€…éå°ç‹—
ä»»åŠ¡4çš„å†…å®¹å°†è¦ç¼–å†™TODO4å¤„çš„adjust_results4_isadogå‡½æ•°ã€‚

æ­¤å‡½æ•°é¦–å…ˆè¯»å–dognames.txt æ–‡ä»¶ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ•°æ®ç»“æ„ï¼ˆå­—å…¸ï¼‰æ¥å­˜å‚¨ä»æ–‡ä»¶ä¸­è·å–çš„æœ‰æ•ˆçš„å°ç‹—åç§°ï¼Œå°†å°ç‹—åç§°ä¸ä»»åŠ¡3è¿”å›çš„å­—å…¸ (resutlts_dic)ä¸­çš„åˆ†ç±»å™¨æ ‡ç­¾å’Œå® ç‰©å›¾åƒæ ‡ç­¾åŒæ—¶è¿›è¡Œæ¯”è¾ƒï¼Œç„¶åè°ƒæ•´ç»“æœå­—å…¸ï¼Œéœ€è¦è®¡ç®—å‡ºè¿™å¼ å›¾åƒæ˜¯â€œå°ç‹—â€æˆ–â€œéå°ç‹—â€ã€‚

**æ³¨æ„ï¼Œadjust_results4_isadog å‡½æ•°éœ€è¦æ›´æ”¹ç»“æœå­—å…¸ï¼ˆresults_dicï¼‰ï¼Œresults_dicå·²åœ¨é¡¹ç›®ä¸»ä½“éƒ¨åˆ†å®šä¹‰ï¼Œä½†æ˜¯å› ä¸ºå­—å…¸å¯å˜çš„ï¼Œå› æ­¤å‡½æ•°æ— éœ€è¿”å›æ­¤å­—å…¸ã€‚

results_dicï¼Œå°†é”®è®¾ä¸ºå® ç‰©å›¾åƒæ–‡ä»¶åï¼Œå€¼è®¾ä¸º pet_image æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰40ä¸ªå® ç‰©å›¾åƒçš„åˆ—è¡¨ã€‚æ¯ä¸ªé”®åˆ—è¡¨ç°åœ¨å°†åŒ…å«å¦å¤–ä¸¤é¡¹ï¼šå® ç‰©å›¾åƒæ ‡ç­¾æ˜¯å°ç‹—ï¼ˆç´¢å¼• 3ï¼‰å’Œåˆ†ç±»å™¨æ ‡ç­¾æ˜¯å°ç‹—ï¼ˆç´¢å¼• 4ï¼‰ï¼Œè¯¦ç»†è®¾ç½®è§å‡½æ•°è¯´æ˜ã€‚

**æµ‹è¯•å†…å®¹**

* æ·»åŠ è¾“å‡ºè¯­å¥ï¼Œä½¿ç”¨ adjust_results4_isadog è¿”å›çš„å­—å…¸è¾“å‡ºåˆ†ç±»å™¨æ ‡ç­¾å’Œå® ç‰©å›¾åƒæ ‡ç­¾åŒ¹é…çš„æƒ…å½¢ã€‚
* æ­¤å¤–ï¼Œæ·»åŠ å…¶ä»–ä¸´æ—¶è¾“å‡ºè¯­å¥ï¼Œä½¿ç”¨ adjust_results4_isadog è¿”å›çš„å­—å…¸è¾“å‡ºåˆ†ç±»å™¨æ ‡ç­¾å’Œå® ç‰©æ ‡ç­¾ä¸åŒ¹é…çš„æ‰€æœ‰æƒ…å½¢ã€‚

å»ºè®®éå†å­—å…¸ä¸¤æ¬¡ï¼Œç”¨ä¸¤ä¸ªä¸åŒçš„ç¾¤ç»„è¾“å‡ºåŒ¹é…å’Œä¸åŒ¹é…çš„æƒ…å½¢ï¼Œè¿™æ ·æ£€æŸ¥èµ·æ¥æ›´ç®€å•ã€‚

æ£€æŸ¥ç»“æœåº”è¯¥ä¸ºï¼š

* åˆ†ç±»å™¨æ ‡ç­¾å’Œå® ç‰©å›¾åƒæ ‡ç­¾åŒ¹é…çš„æƒ…å½¢éƒ½å°†ä¸¤ç§æ ‡ç­¾ç›¸åº”åœ°åˆ†ç±»ä¸ºâ€œå°ç‹—â€æˆ–â€œéå°ç‹—â€
* åˆ†ç±»å™¨æ ‡ç­¾å’Œå® ç‰©å›¾åƒæ ‡ç­¾ä¸åŒ¹é…çš„æƒ…å½¢åˆ†åˆ«å°†æ¯ä¸ªæ ‡ç­¾æ­£ç¡®åœ°åˆ†ç±»ä¸ºâ€œå°ç‹—â€æˆ–â€œéå°ç‹—â€
* åŒ¹é…æ•°å’Œä¸åŒ¹é…æ•°åŠ èµ·æ¥ä¸º 40ï¼Œæ­£å¥½ç­‰äº pet_images æ–‡ä»¶å¤¹ä¸­çš„å›¾åƒæ€»æ•° 40ã€‚


```python
#TODO 4
def adjust_results4_isadog(result_dic,dogsfile):
       dognames_dict = {}
       with open(file=dogsfile) as file_object:
              for line in file_object:
                     dognames_dict[line.strip()]=1
       # print(dognames_dict)

       for key,value in result_dic.items():
              index_3 = index_4 = 0
       # value[0]æ˜¯å›¾ç‰‡çš„labelï¼Œvalue[1]æ˜¯åˆ†ç±»å™¨ç»™å‡ºçš„æ ‡ç­¾,key_2æ˜¯dognameså­—å…¸çš„é”®å
              for key_2 in dognames_dict.keys():
                     # é¦–å…ˆç”¨value[0]å’Œkey_2æ¯”å¯¹ï¼Œç„¶åæ˜¯value[1]å’Œkey_2æ¯”å¯¹
                     found_idx_1 = key_2.find(value[0])
                     if found_idx_1 ==0 and len(value[0])==len(key_2):
                            index_3 = 1
                     if ((found_idx_1 == 0) or (key_2[found_idx_1-1]==" ")) and ((found_idx_1 + len(value[0])== len(key_2)) or
                     (key_2[found_idx_1+len(value[0]):found_idx_1+len(value[0])+1]in (' ',','))):
                            index_3 = 1  
                     found_idx_2 = value[0].find(key_2)
                     if found_idx_2 ==0 and len(value[0])==len(key_2):
                            index_3 = 1
                     if ((found_idx_2 == 0) or (value[0][found_idx_2-1]==" ")) and ((found_idx_2 + len(key_2)== len(value[0])) or
                     (value[0][found_idx_2+len(key_2):found_idx_2+len(key_2)+1]in (' ',','))):
                            index_3 = 1  
                     # ç°åœ¨æ˜¯value[1]å’Œkey_2æ¯”å¯¹
                     found_idx_3 = key_2.find(value[1])
                     if found_idx_3 ==0 and len(value[1])==len(key_2):
                            index_4 = 1
                     if ((found_idx_3 == 0) or (key_2[found_idx_3-1]==" ")) and ((found_idx_3 + len(value[1])== len(key_2)) or
                     (key_2[found_idx_3+len(value[1]):found_idx_3+len(value[1])+1]in (' ',','))):
                            index_4 = 1  
                     found_idx_4 = value[1].find(key_2)
                     if found_idx_4 ==0 and len(value[1])==len(key_2):
                            index_4 = 1
                     if ((found_idx_4 == 0) or (value[1][found_idx_4-1]==" ")) and ((found_idx_4 + len(key_2)== len(value[1])) or
                     (value[1][found_idx_4+len(key_2):found_idx_4+len(key_2)+1]in (' ',','))):
                            index_4 = 1  
                     if index_3==1 and index_4==1:
                            break
              result_dic[key].append(index_3)
              result_dic[key].append(index_4)
                     
       """
       è°ƒæ•´ç»“æœå­—å…¸results_dicçš„å†…å®¹ï¼Œé€šè¿‡å’Œdognames.txtçš„å†…å®¹è¿›è¡Œæ¯”è¾ƒï¼Œæ‰¾åˆ°å“ªäº›å›¾ç‰‡æ˜¯å°ç‹—ï¼Œå“ªäº›å›¾ç‰‡ä¸æ˜¯ï¼Œå¹¶æ ‡è®°å‡ºæ¥
       ä¸ºåé¢çš„ç»Ÿè®¡æ•°æ®åšå‡†å¤‡
       å‚æ•°:
       results_dic - ç»“æœå­—å…¸ï¼Œé”®keyæ˜¯å›¾ç‰‡æ–‡ä»¶åï¼Œå€¼æ˜¯ä¸€ä¸ªåˆ—è¡¨:
             (index)idx 0 = å® ç‰©çš„å›¾ç‰‡Label (string)
                    idx 1 = åˆ†ç±»å™¨ç»™å‡ºçš„label(string)
                    idx 2 = 1/0 (int)  1 ï¼šå›¾ç‰‡labelå’Œåˆ†ç±»å™¨labelç›¸ç­‰  0 = ä¸¤ä¸ªlabelä¸ç›¸ç­‰
                    ---  idx 3 & idx 4 æ˜¯æœ¬å‡½æ•°å¢åŠ çš„å†…å®¹ ---
                    idx 3 = 1/0 (int)  1 = å›¾ç‰‡labelæ˜¯å°ç‹—  0 = å›¾ç‰‡labelä¸æ˜¯å°ç‹— 
                    idx 4 = 1/0 (int)  1 = åˆ†ç±»å™¨labelæ˜¯å°ç‹— 0 = åˆ†ç±»å™¨labelä¸æ˜¯å°ç‹—
       dogsfile - ä¸€ä¸ªåŒ…å«1000ç§labelçš„txtæ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†ImageNetæ•°æ®é›†ä¸­æ‰€æœ‰å‡ºç°è¿‡çš„ç‹—ç‹—ç§ç±»ã€‚
                è¿™ä¸ªæ–‡ä»¶é‡Œæ¯è¡Œéƒ½æœ‰ä¸€ä¸ªå°ç‹—ç§ç±».
       è¿”å›å€¼:
           None 
       """           
```

# æ¨¡å—5ï¼šç»Ÿè®¡ç‹—ç‹—å›¾åƒæƒ…å†µ
è¿™ä¸ªä»»åŠ¡å°†ä¼šæ¶‰åŠå„é¡¹ç™¾åˆ†æ¯”è®¡ç®—ç»“æœã€‚
å³å°†ç¼–å†™çš„æ¨¡å—å‡½æ•°æ˜¯ï¼šcalculates_results_statsã€‚å¯¹äºæ­¤å‡½æ•°ï¼Œæ¥æ”¶çš„è¾“å…¥ä¸ºresults_dicï¼ˆæ¥è‡ª adjust_results4_isadog çš„åˆ—è¡¨å­—å…¸ï¼‰ï¼Œç„¶ååˆ›å»ºç»“æœç»Ÿè®¡ä¿¡æ¯å­—å…¸ (results_stats)ã€‚æ­¤ç»“æœå­—å…¸å°†ä»…åŒ…å«ç»Ÿè®¡é‡çš„åç§°ä½œä¸ºé”®ï¼Œå€¼å°†ä¸ºç»Ÿè®¡é‡çš„æ•°å­—å€¼ã€‚

å»ºè®®ï¼šåœ¨å‡½æ•°çš„ç¬¬ä¸€è¡Œåˆ›å»ºæ­¤å­—å…¸ï¼Œå¹¶åœ¨å‡½æ•°çš„æœ€åä¸€è¡Œè¿”å›å€¼ã€‚

è¿™æ®µä»»åŠ¡å°†èƒ½å¤Ÿæä¾›å‰é¢æˆ‘ä»¬éœ€è¦ç»Ÿè®¡å†…å®¹çš„è®¡æ•°å’Œç™¾åˆ†æ¯”å€¼ã€‚ç»Ÿè®¡çš„å†…å®¹åŒ…æ‹¬ï¼šå“ªäº›æ˜¯å°ç‹—å›¾åƒï¼Œå“ªäº›ä¸æ˜¯å°ç‹—å›¾åƒï¼ŒåŒæ—¶é’ˆå¯¹å°ç‹—å›¾åƒï¼Œèƒ½å¤Ÿåˆ†è¾¨å…¶å“ç§ï¼Œæˆ‘ä»¬çš„ç¨‹åºçš„å‡†ç¡®ç‡åº”è¯¥æ˜¯å¤šå°‘ï¼Ÿ

**results_stats æœ€åçš„æ ¼å¼ä¸ºï¼š**

é”® = ç»Ÿè®¡é‡çš„åç§°ï¼ˆä¾‹å¦‚ n_correct_dogsã€pct_correct_dogsã€n_correct_breedã€pct_correct_breedï¼‰
å€¼ = ç»Ÿè®¡é‡çš„å€¼ï¼ˆä¾‹å¦‚ 30ã€100%ã€24ã€80%ï¼‰
ä¾‹å¦‚ï¼šexample_dictionary = {'n_correct_dogs': 30, 'pct_correct_dogs': 100.0, 'n_correct_breed': 24, 'pct_correct_breed': 80.0}

åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç»Ÿè®¡çš„é‡æœ‰ï¼š
1. Z å›¾åƒæ•°é‡ï¼šè¿™æ˜¯results_dic çš„é•¿åº¦ï¼Œå› ä¸ºæ–‡ä»¶å = é”®
2. A å°ç‹—åŒ¹é…æ­£ç¡®çš„æ•°é‡ï¼šä¸¤ä¸ªæ ‡ç­¾éƒ½æ˜¯å°ç‹—ï¼šresults_dic[key][3] = 1 åŠ results_dic[key][4] = 1
3. B å°ç‹—å›¾åƒçš„æ•°é‡ï¼šå® ç‰©æ ‡ç­¾æ˜¯å°ç‹—ï¼šresults_dic[key][3] = 1
4. C æ­£ç¡®éå°ç‹—åŒ¹é…é¡¹çš„æ•°é‡ ä¸¤ä¸ªæ ‡ç­¾éƒ½ä¸æ˜¯å°ç‹—ï¼šresults_dic[key][3] = 0 åŠ results_dic[key][4] = 0
5. D éå°ç‹—å›¾åƒçš„æ•°é‡
   * å›¾åƒæ•°é‡å‡å»å°ç‹—å›¾åƒæ•°é‡ æˆ–è€…
   * å® ç‰©æ ‡ç­¾ä¸æ˜¯å°ç‹—ï¼šresults_dic[key][3] = 0
6. E æ­£ç¡®å“ç§åŒ¹é…é¡¹çš„æ•°é‡ å® ç‰©æ ‡ç­¾æ˜¯å°ç‹—å¹¶ä¸”æ ‡ç­¾åŒ¹é…ï¼šresults_dic[key][3] = 1 åŠ results_dic[key][2] = 1 
7. Y æ ‡ç­¾åŒ¹é…é¡¹çš„æ•°é‡ æ ‡ç­¾åŒ¹é…ï¼šresults_dic[key][2] = 1

å¦å¤–éœ€è¦è®¡ç®—çš„ç™¾åˆ†æ¯”æœ‰(å¯¹åº”å‰é¢ç»Ÿè®¡é‡çš„å­—æ¯æ ‡å·æ¥çœ‹)ï¼š
1. æ­£ç¡®åˆ†ç±»çš„å°ç‹—å›¾åƒæ‰€å ç™¾åˆ†æ¯”
   * Aï¼šæ­£ç¡®åˆ†ç±»çš„å°ç‹—å›¾åƒæ•°é‡
   * Bï¼šå°ç‹—å›¾åƒæ•°é‡
   * æ­£ç¡®åˆ†ç±»ä¸ºå°ç‹—çš„å›¾åƒæ‰€å ç™¾åˆ†æ¯”ï¼šA/B * 100
2. æ­£ç¡®åˆ†ç±»çš„éå°ç‹—å›¾åƒæ‰€å ç™¾åˆ†æ¯”
   * Cï¼šæ­£ç¡®åˆ†ç±»çš„éå°ç‹—å›¾åƒæ•°é‡ã€‚
   * Dï¼šéå°ç‹—å›¾åƒæ•°é‡
   * æ­£ç¡®åˆ†ç±»ä¸ºéå°ç‹—çš„å›¾åƒæ‰€å ç™¾åˆ†æ¯”ï¼šC/D * 100
3. æ­£ç¡®åˆ†ç±»çš„å°ç‹—å“ç§æ‰€å ç™¾åˆ†æ¯”
   * Eï¼šæ­£ç¡®åˆ†ç±»ä¸ºç‰¹å®šå“ç§çš„_å°ç‹—_å›¾åƒæ•°é‡ã€‚
   * Bï¼š_å°ç‹—_å›¾åƒæ•°é‡
   * æ­£ç¡®åˆ†ç±»çš„_å°ç‹—_å“ç§å›¾åƒæ‰€å ç™¾åˆ†æ¯”ï¼šE/B * 100
4. ç™¾åˆ†æ¯”æ ‡ç­¾åŒ¹é…æ•°ï¼ˆæ— è®ºæ˜¯å¦ä¸ºå°ç‹—ï¼‰
   * Yï¼šæ ‡ç­¾åŒ¹é…æ•°é‡
   * Zï¼šå›¾åƒæ•°é‡
   * æ­£ç¡®åŒ¹é…çš„å›¾åƒæ‰€å ç™¾åˆ†æ¯”ï¼ˆæ— è®ºæ˜¯å¦ä¸ºå°ç‹—ï¼‰ï¼šY/Z * 100

**æµ‹è¯•å†…å®¹**

æ£€æŸ¥æ¨¡å—5çš„è®¡ç®—ç»“æœæ˜¯å¦æ­£ç¡®ã€‚


```python
# TODO 5
def calculates_results_stats(result_dic):
    """
    è¿™ä¸ªå‡½æ•°ç”¨äºå¯¹results_dicä¸­çš„æ•°æ®è¿›è¡Œç»Ÿè®¡ã€‚
    å‚æ•°:
      results_dic - ç»“æœå­—å…¸ï¼Œé”®keyæ˜¯å›¾ç‰‡æ–‡ä»¶åï¼Œå€¼æ˜¯ä¸€ä¸ªåˆ—è¡¨:
             (index)idx 0 = å® ç‰©çš„å›¾ç‰‡Label (string)
                    idx 1 = åˆ†ç±»å™¨ç»™å‡ºçš„label(string)
                    idx 2 = 1/0 (int)  1 ï¼šå›¾ç‰‡labelå’Œåˆ†ç±»å™¨labelç›¸ç­‰  0 = ä¸¤ä¸ªlabelä¸ç›¸ç­‰
                    ---  idx 3 & idx 4 æ˜¯æœ¬å‡½æ•°å¢åŠ çš„å†…å®¹ ---
                    idx 3 = 1/0 (int)  1 = å›¾ç‰‡labelæ˜¯å°ç‹—  0 = å›¾ç‰‡labelä¸æ˜¯å°ç‹— 
                    idx 4 = 1/0 (int)  1 = åˆ†ç±»å™¨labelæ˜¯å°ç‹— 0 = åˆ†ç±»å™¨labelä¸æ˜¯å°ç‹—
    è¿”å›å€¼:
      results_stats - ç»Ÿè®¡ç»“æœå­—å…¸ï¼Œé”®æ˜¯ç»Ÿè®¡çš„ç±»å‹ï¼Œå€¼æ˜¯ç»Ÿè®¡çš„ç»“æœã€‚
    """
    result_stats = {}
    n_picture = len(result_dic)  #Zå›¾åƒæ•°é‡
    n_correct_dogs = 0   #Aå°ç‹—åŒ¹é…æ­£ç¡®çš„æ•°é‡
    n_picture_of_dogs = 0   #Bå°ç‹—å›¾åƒçš„æ•°é‡
    n_incorrect_not_dogs = 0 #Cæ­£ç¡®éå°ç‹—åŒ¹é…é¡¹çš„æ•°é‡ï¼Œä¸¤ä¸ªæ ‡ç­¾éƒ½ä¸æ˜¯å°ç‹—
    n_not_dogs = 0 #Déå°ç‹—å›¾åƒçš„æ•°é‡
    n_correct_breed_and_dogs = 0 #Eæ­£ç¡®å“ç§åŒ¹é…
    n_correct_breed = 0 #Yæ ‡ç­¾åŒ¹é…é¡¹çš„æ•°é‡
    for key,value in result_dic.items():
      if value[3] == 1:
        n_picture_of_dogs += 1
      if value[3] == 1 and value[4] == 1:
        n_correct_dogs += 1
      if value[3] == 0 and value[4] == 0:
        n_incorrect_not_dogs += 1
      if value[3] == 0:
        n_not_dogs += 1
      if value[2] == 1 and value[3] == 1:
        n_correct_breed_and_dogs += 1
      if value[2] == 1:
        n_correct_breed += 1
    if n_picture_of_dogs == 0 or n_not_dogs == 0 or n_picture ==0:
      print("é™¤æ•°ä¸º0!!!!!")
      return None
    else:
      #æ­£ç¡®åˆ†ç±»çš„å°ç‹—å›¾åƒæ‰€å ç™¾åˆ†æ¯”
      pct_correct_dogs = n_correct_dogs / n_picture_of_dogs * 100
      #æ­£ç¡®åˆ†ç±»çš„éå°ç‹—å›¾åƒæ‰€å ç™¾åˆ†æ¯”
      pct_correct_not_dogs = n_incorrect_not_dogs / n_not_dogs * 100
      #æ­£ç¡®åˆ†ç±»çš„å°ç‹—å“ç§æ‰€å ç™¾åˆ†æ¯”
      pct_correct_dogs_sorted = n_correct_breed_and_dogs / n_picture_of_dogs * 100
      #ç™¾åˆ†æ¯”æ ‡ç­¾åŒ¹é…æ•°ï¼ˆæ— è®ºæ˜¯å¦ä¸ºå°ç‹—ï¼‰
      pct_correct_breed = n_correct_breed / n_picture * 100 

      result_stats['n_picture'] = n_picture
      result_stats['n_correct_dogs'] = n_correct_dogs
      result_stats['n_picture_of_dogs'] = n_picture_of_dogs
      result_stats['n_incorrect_not_dogs'] = n_incorrect_not_dogs
      result_stats['n_not_dogs'] = n_not_dogs
      result_stats['n_correct_breed_and_dogs'] = n_correct_breed_and_dogs
      result_stats['n_correct_breed'] = n_correct_breed
      result_stats['pct_correct_dogs'] = pct_correct_dogs
      result_stats['pct_correct_not_dogs'] = pct_correct_not_dogs
      result_stats['pct_correct_dogs_sorted'] = pct_correct_dogs_sorted
      result_stats['pct_correct_breed'] = pct_correct_breed
      return result_stats
```

# ä»»åŠ¡6ï¼šæ¯”è¾ƒæ¨¡å‹è¾“å‡ºå¹¶æ˜¾ç¤ºç»“æœ

æœ€åä¸€ä¸ªä»»åŠ¡éœ€è¦ç¼–å†™å‡½æ•° print_resultsã€‚æ­¤å‡½æ•°å°†è¾“å‡º results_dic (adjust_results4_isadog ä¸­çš„åˆ—è¡¨å­—å…¸ï¼‰å’Œç»“æœç»Ÿè®¡å­—å…¸ï¼ˆæ¥è‡ª calculates_results_stats çš„ results_statsï¼‰ã€‚

é¦–å…ˆè¦è¾“å‡ºè¯­å¥ï¼Œè¡¨ç¤ºé’ˆå¯¹ä¸‰ä¸ªCNNæ¨¡å‹æ¶æ„ä¸­çš„å“ªä¸ªæ¶æ„ä»¥åŠä¼ å…¥çš„å“ªä¸ªè¾“å…¥å‚æ•° modelã€‚
æ¥ç€ï¼Œéœ€è¦é’ˆå¯¹ä¸‰ä¸ª CNN æ¨¡å‹æ¶æ„éƒ½è¾“å‡ºä»¥ä¸‹ä¸‰é¡¹çš„è®¡æ•°ã€‚

1. å›¾åƒæ•°é‡
2. å°ç‹—å›¾åƒæ•°é‡
3. éå°ç‹—å›¾åƒæ•°é‡

æœ€åï¼Œéå† results_stats å­—å…¸å¹¶è¾“å‡ºç»Ÿè®¡é‡çš„åç§°å’Œæ‰€æœ‰ç™¾åˆ†æ¯”çš„å€¼ï¼ˆä¾‹å¦‚ä»¥å­—æ¯â€œpâ€å¼€å¤´çš„é”®ï¼‰ã€‚

ç™¾åˆ†æ¯”è®¡ç®—ç»“æœï¼š

1. æ­£ç¡®çš„å°ç‹—å›¾åƒæ‰€å ç™¾åˆ†æ¯”
2. æ­£ç¡®çš„å“ç§å›¾åƒæ‰€å ç™¾åˆ†æ¯”
3. æ­£ç¡®çš„éå°ç‹—å›¾åƒæ‰€å ç™¾åˆ†æ¯”
4. åŒ¹é…é¡¹æ‰€å ç™¾åˆ†æ¯”ï¼ˆå¯é€‰ - åŒ…æ‹¬å°ç‹—å›¾åƒå’Œéå°ç‹—å›¾åƒï¼‰
5. ï¼ˆå¯é€‰ï¼‰è¾“å‡ºåˆ†ç±»é”™è¯¯çš„é¡¹

å¯é€‰åŠŸèƒ½æ—¨åœ¨æ”¹å–„ä»£ç çš„è°ƒè¯•æ€§èƒ½ã€‚æ­¤å¤–ï¼Œå¯ä»¥ä½¿æˆ‘ä»¬èƒ½å¤Ÿåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸€äº›æ¯ç§ç®—æ³•éƒ½å¾ˆéš¾åˆ¤æ–­çš„å°ç‹—å“ç§ã€‚

**ï¼ˆé€‰ä½œéƒ¨åˆ†ï¼‰ï¼š**
1. é€‰æ‹©è‡ªå·±æœ‰å…´è¶£çš„å® ç‰©å›¾ç‰‡ï¼Œå¢åŠ åˆ°pet_imageä¸­(æ³¨æ„æœ¬é¡¹ç›®åˆšå¼€å§‹çš„æç¤º)
2. å‚è€ƒPaddleHubä¸­å…¶ä»–é¢„è®­ç»ƒæ¨¡å‹çš„æ–‡æ¡£ï¼Œå¢åŠ æ¯”è¾ƒçš„æ¨¡å‹ç§ç±»ã€‚

**æµ‹è¯•**

è¿™ä¸ªä»»åŠ¡ä¸éœ€è¦æµç¨‹å›¾ï¼Œä½†æ˜¯éœ€è¦æ£€æŸ¥ï¼š

1. è¿è¡Œç¨‹åºåï¼Œæ­£ç¡®åœ°è¾“å‡ºäº†ç»Ÿè®¡é‡å’Œè®¡æ•°å¹¶ä¸”è®¾å®šäº†æ­£ç¡®çš„æ ¼å¼ã€‚è®¡ç®—ç»“æœçš„ä»£ç æ£€æŸ¥éƒ¨åˆ†çš„ç»“æœåº”è¯¥ä¸6ä¸ªç»Ÿè®¡é‡è¾“å‡ºçš„ç»“æœåŒ¹é…ã€‚
2. åœ¨å‡½æ•°è°ƒç”¨ä¸­ä¿ç•™ä¸¤ä¸ªé»˜è®¤å‚æ•°ï¼Œä¸è¾“å‡ºåˆ†ç±»é”™è¯¯çš„ç»“æœ
3. åœ¨å‡½æ•°è°ƒç”¨ä¸­ä¸ºä¸¤ä¸ªé»˜è®¤å‚æ•°æ·»åŠ å€¼ Trueï¼Œè¾“å‡ºåˆ†ç±»é”™è¯¯çš„ç»“æœï¼ˆé¢„æœŸçš„è¡Œä¸ºï¼‰


```python
# TODO 6
def print_results(result_dic,result_stats,model_name,print_incorroect_dogs=False,print_incorrect_breed = False):
    """
    å±•ç¤ºæˆ‘ä»¬å‰é¢å·¥ä½œçš„ç»“è®º
    å‚æ•°:
      results_dic - ç»“æœå­—å…¸ï¼Œé”®keyæ˜¯å›¾ç‰‡æ–‡ä»¶åï¼Œå€¼æ˜¯ä¸€ä¸ªåˆ—è¡¨:
             (index)idx 0 = å® ç‰©çš„å›¾ç‰‡Label (string)
                    idx 1 = åˆ†ç±»å™¨ç»™å‡ºçš„label(string)
                    idx 2 = 1/0 (int)  1 ï¼šå›¾ç‰‡labelå’Œåˆ†ç±»å™¨labelç›¸ç­‰  0 = ä¸¤ä¸ªlabelä¸ç›¸ç­‰
                    ---  idx 3 & idx 4 æ˜¯æœ¬å‡½æ•°å¢åŠ çš„å†…å®¹ ---
                    idx 3 = 1/0 (int)  1 = å›¾ç‰‡labelæ˜¯å°ç‹—  0 = å›¾ç‰‡labelä¸æ˜¯å°ç‹— 
                    idx 4 = 1/0 (int)  1 = åˆ†ç±»å™¨labelæ˜¯å°ç‹— 0 = åˆ†ç±»å™¨labelä¸æ˜¯å°ç‹—
      results_stats - ç»Ÿè®¡ç»“æœå­—å…¸ï¼Œé”®æ˜¯ç»Ÿè®¡çš„ç±»å‹ï¼Œå€¼æ˜¯ç»Ÿè®¡çš„ç»“æœã€‚
      model - é¢„è®­ç»ƒæ¨¡å‹åç§°: resnet alexnet vgg (string)
      print_incorrect_dogs - True- å±•ç¤ºæ²¡æœ‰æ­£ç¡®åˆ†ç±»çš„å›¾ç‰‡åå­— False - ä¸åšå±•ç¤ºï¼ˆboolï¼‰ 
      print_incorrect_breed - True- å±•ç¤ºæ²¡æœ‰æ­£ç¡®åˆ†ç±»çš„ç‹—ç‹—å“ç§ False - ä¸åšå±•ç¤º (bool) 
    è¿”å›å€¼:
           None - æ²¡æœ‰è¿”å›å€¼ï¼Œæœ¬å‡½æ•°ç”¨äºæ‰“å°æœ€ç»ˆçš„ç»Ÿè®¡å±•ç¤º.
    """    
    print(f"ä½¿ç”¨CNNæ¨¡å‹æ¶æ„ä¸­çš„{models[model_name]}æ¶æ„ï¼Œä¼ å…¥çš„å‚æ•°æ˜¯{model_name}")
    print(f"å›¾åƒæ•°é‡ï¼š{result_stats['n_picture']}")
    print(f"å°ç‹—å›¾åƒæ•°é‡ï¼š{result_stats['n_picture_of_dogs']}")
    print(f"éå°ç‹—å›¾åƒæ•°é‡ï¼š{result_stats['n_not_dogs']}")
    print("\nç»“æœ:")
    print(f"\tæ­£ç¡®çš„å°ç‹—å›¾åƒæ‰€å ç™¾åˆ†æ¯”ï¼š{result_stats['pct_correct_dogs']}%")
    print(f"\tæ­£ç¡®çš„å“ç§å›¾åƒæ‰€å ç™¾åˆ†æ¯”ï¼š{result_stats['pct_correct_dogs_sorted']}%")
    print(f"\tæ­£ç¡®çš„éå°ç‹—å›¾åƒæ‰€å ç™¾åˆ†æ¯”ï¼š{result_stats['pct_correct_not_dogs']}%")
    print(f"\tåŒ¹é…é¡¹æ‰€å ç™¾åˆ†æ¯”ï¼ˆåŒ…å«å°ç‹—å›¾åƒå’Œéå°ç‹—å›¾åƒï¼‰ï¼š{result_stats['pct_correct_breed']}%")
    if print_incorroect_dogs:
       print(f"\nåˆ†ç±»é”™è¯¯çš„é¡¹ï¼š")
       print("\n    å›¾ç‰‡åï¼š")
    for key,value in result_dic.items():
       if print_incorroect_dogs:
              if value[2] == 0 :
                     print(f"\t{key.title()}")
    if print_incorrect_breed:
       temp = []
       print("\n    ç‹—ç‹—å“ç§ï¼š")
       for key,value in result_dic.items():
              if value[3] == 1 and value[2] == 0 :
                     temp.append(value[0])
       # ç”±äºç‹—ç‹—çš„å“ç§ä¼šæœ‰é‡å¤ï¼Œä½¿ç”¨seté›†åˆå»é™¤é‡å¤é¡¹
       unique = set(temp)
       for dogname in unique:
              print('\t',dogname)
```

# é¡¹ç›®æŠ¥å‘Š

æ‰€æœ‰ä»»åŠ¡å®Œæˆåï¼Œéœ€è¦ä»¥å°ç»„ä¸ºå•ä½å®Œæˆè¿™ä¸ªé¡¹ç›®çš„æŠ¥å‘Šï¼ŒæŠ¥å‘ŠåŒ…æ‹¬ï¼š

1. ä»»åŠ¡çš„åˆ†æ 
2. ä»»åŠ¡çš„æ¨¡å—ç»„æˆ
3. æ¯ä¸ªä»»åŠ¡çš„æµç¨‹å›¾
4. æ¯ä¸ªæ¨¡å—çš„å…·ä½“å®ç°ï¼ˆå«æ ¸å¿ƒä»£ç ï¼‰
5. å®ç°æ•ˆæœæˆªå›¾ä»¥åŠæ¨¡å‹çš„æ¯”è¾ƒç»“æœ
6. å¯¹äºä»»åŠ¡è¿‡ç¨‹ä¸­å‡ºç°é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ
7. å®éªŒå¿ƒå¾—å’Œæ”¹è¿›å»ºè®®